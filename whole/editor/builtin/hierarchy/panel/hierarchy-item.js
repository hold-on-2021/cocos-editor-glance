(()=>{"use strict";const e=Editor.require("app://editor/page/scene-utils/dump/get-hierarchy-dump").NodeStates;Editor.polymerElement({hostAttributes:{draggable:"true"},properties:{foldable:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},folded:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},selected:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},name:{type:String,value:""},type:{type:String,value:""},hovering:{type:Boolean,value:!1,reflectToAttribute:!0},highlighted:{type:Boolean,value:!1,reflectToAttribute:!0},invalid:{type:Boolean,value:!1,reflectToAttribute:!0},deactivated:{type:Boolean,value:!1,reflectToAttribute:!0},sleeping:{type:Boolean,value:!1,reflectToAttribute:!0},state:{type:Number,value:e.Normal,reflectToAttribute:!0}},listeners:{mousedown:"_onMouseDown",click:"_onClick",dblclick:"_onDblClick"},ready(){this._renaming=!1,this._userId=""},_nameClass:e=>e?"name":"no-name",_nameText:e=>e||"No Name",_foldIconClass:e=>e?"fa fa-caret-right":"fa fa-caret-down",_wrapperClass(t){switch(t){case e.Prefab:return"wrapper prefab";case e.Prefab_AutoSync:return"wrapper prefab-autosync";default:return"wrapper"}},_onMouseDown(e){if(1!==e.which)return;if(e.stopPropagation(),this._renaming)return;let t=!1,o=!1;e.shiftKey?t=!0:(e.metaKey||e.ctrlKey)&&(o=!0),this.fire("item-selecting",{toggle:o,shift:t})},_onClick(e){if(1!==e.which)return;e.stopPropagation();let t=!1,o=!1;e.shiftKey?t=!0:(e.metaKey||e.ctrlKey)&&(o=!0),this.fire("item-select",{toggle:o,shift:t})},_onDblClick(e){1===e.which&&(e.shiftKey||e.metaKey||e.ctrlKey||(clearTimeout(this._nameClickID),this._nameClickID=null,e.stopPropagation(),this.fire("item-db-click")))},_onNameClick(e){if(this._nameClickID)return;let t=Editor.Selection.curGlobalActivate();if(!t||"node"!==t.type||t.id!==this._userId)return;let o=Editor.Selection.curSelection("node");Editor.Selection.confirmed("node")&&1===o.length&&(e.stopPropagation(),clearTimeout(this._nameClickID),this._nameClickID=setTimeout(()=>{this._nameClickID=null,this.fire("item-rename")},300))},_onFoldMouseDown(e){e.stopPropagation()},_onFoldClick(e){e.stopPropagation(),1===e.which&&(this.folded=!this.folded)},_onFoldDblClick(e){e.stopPropagation()},_onMouseEnter(e){e.stopPropagation(),Editor.Selection.hover("node",this._userId)},_onMouseLeave(e){e.stopPropagation(),Editor.Selection.hover("node",null)},hint(e,t){e=e||"white",t=t||1e3;let o=window.getComputedStyle(this.$.bar);this.$.bar.animate([{background:e,transform:"scale(1.2)"},{background:o.backgroundColor,transform:"scale(1)"}],{duration:t})}})})();