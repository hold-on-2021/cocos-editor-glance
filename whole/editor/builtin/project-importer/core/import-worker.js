(()=>{"use strict";const e=require("electron").ipcRenderer;window.onerror=function(e,r,i,t,o){window.onerror=null,Editor.Ipc.sendToMain("app:import-project-abort",o.stack)},e.on("app:init-import-worker",function(e){Editor.require("app://editor/share/editor-utils"),Editor.require("unpack://engine"),Editor.require("app://editor/page/engine-extends"),Editor.require("app://editor/share/engine-extends/init"),Editor.require("app://editor/share/engine-extends/serialize"),Editor.require("app://editor/share/register-builtin-assets"),Editor.require("app://editor/page/asset-db"),Editor.require("app://editor/page/scene-utils");require("async").waterfall([function(e){cc.AssetLibrary.init({libraryPath:Editor.remote.importPath});var r=document.createElement("canvas");document.body.appendChild(r),r.id="engine-canvas",cc.game.run({width:800,height:600,id:"engine-canvas",jsList:[],debugMode:cc.DebugMode.INFO},e)}],e.reply)}),e.on("app:import-project",function(e,r,i){var t=Editor.require(i);t.importer?t.importer(r,e.reply):e.reply(new Error("Not found correct importer."))})})();