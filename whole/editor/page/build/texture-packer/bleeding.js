var applyContourBleed=function(e,i,l,o,t,d,f){if(0!==o.width&&0!==o.height)for(var r=o.x,a=o.xMax,n=o.y,p=o.yMax,h=4*l,y=0,c=t.length,g=0,u=0,x=0,s=0,B=n*h+4*r,m=n,b=0;m<p;++m,B+=h)for(s=B,b=r;b<a;++b,s+=4)if(0===i[s+3])for(y=0;y<c;y++)if(g=b+t[y],u=m+d[y],g>=r&&g<a&&u>=n&&u<p&&(x=s+f[y],i[x+3]>0)){e[s]=i[x],e[s+1]=i[x+1],e[s+2]=i[x+2];break}},applyPaddingBleed=function(e,i,l,o,t){if(0!==t.width&&0!==t.height){var d=t.y,f=t.yMax-1,r=t.x,a=t.xMax-1,n=4*l,p=4*r,h=4*a,y=d*n,c=f*n,g=0,u=0;if(d-1>=0)for(g=y+p,u=y+h+3;g<=u;++g)e[g-n]=i[g];if(f+1<o)for(g=c+p,u=c+h+3;g<=u;++g)e[g+n]=i[g];if(r-1>=0)for(g=y+p,u=c+p;g<=u;g+=n)e[g-4]=i[g],e[g-3]=i[g+1],e[g-2]=i[g+2],e[g-1]=i[g+3];if(a+1<l)for(g=y+h,u=c+h;g<=u;g+=n)e[g+4]=i[g],e[g+5]=i[g+1],e[g+6]=i[g+2],e[g+7]=i[g+3];if(r-1>=0&&d-1>=0)for(u=(g=y+p)+4;g<u;g++)e[g-n-4]=i[g];if(a+1<l&&d-1>=0)for(u=(g=y+h)+4;g<u;g++)e[g-n+4]=i[g];if(r-1>=0&&f+1<o)for(u=(g=c+p)+4;g<u;g++)e[g+n-4]=i[g];if(a+1<l&&f+1<o)for(u=(g=c+h)+4;g<u;g++)e[g+n+4]=i[g]}},applyBleed=function(e,i,l,o){var t=0,d=null;if(e.contourBleed){console.time("apply contour bleed");for(var f=4*i.width,r=[-1,0,1,-1,1,-1,0,1],a=[-1,-1,-1,0,0,1,1,1],n=[],p=0;p<r.length;p++)n[p]=4*r[p]+a[p]*f;for(t=0,d=null;t<i.files.length;t++)d=i.files[t].trim,applyContourBleed(o,l,i.width,cc.rect(d.x,d.y,d.rotatedWidth,d.rotatedHeight),r,a,n);console.timeEnd("apply contour bleed")}if(e.paddingBleed){for(console.time("apply padding bleed"),t=0,d=null;t<i.files.length;t++)d=i.files[t].trim,applyPaddingBleed(o,l,i.width,i.height,cc.rect(d.x,d.y,d.rotatedWidth,d.rotatedHeight));console.timeEnd("apply padding bleed")}};module.exports={applyBleed:applyBleed};